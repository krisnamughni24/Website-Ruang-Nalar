"use strict";
(self.webpackJsonp__wix_thunderbolt_app =
  self.webpackJsonp__wix_thunderbolt_app || []).push([
  [9105],
  {
    5784: function (n, e, t) {
      t.r(e),
        t.d(e, {
          DashboardSdkFactory: function () {
            return I;
          },
        });
      var r = {};
      t.r(r),
        t.d(r, {
          closeModal: function () {
            return C;
          },
          init: function () {
            return _;
          },
          navigate: function () {
            return O;
          },
          observeState: function () {
            return P;
          },
          openModal: function () {
            return A;
          },
          registerHeightReporter: function () {
            return j;
          },
          showToast: function () {
            return E;
          },
        });
      var o = t(1191);
      const a = "dashboardWixCodeSdk";
      var i = t(6175);
      const s = (n) => {
        let e, t;
        return async (r, ...o) => {
          e || ((t = await n()), t && (e = (0, i.Ud)(t)));
          const [a, s] = ((n) => {
            const e = [],
              t = (n) => (e.push(n), { proxyId: e.length - 1 }),
              r = (n) => {
                return n instanceof Promise ||
                  ((e = n) && "[object Function]" === {}.toString.call(e))
                  ? t(n)
                  : Array.isArray(n)
                  ? n.map(r)
                  : n === Object(n)
                  ? Object.entries(n).reduce(
                      (n, [e, t]) => ((n[e] = r(t)), n),
                      {}
                    )
                  : n;
                var e;
              };
            return [r(n), (0, i.sj)(e)];
          })(o);
          return e && e[r](a, s);
        };
      };
      var u = new Set(["https://manage.wix.com", "https://manage.editorx.com"]);
      var c,
        l,
        d = t(8635),
        f = "__proxyCallbackId__wixSDK__",
        v = "__proxyPromiseId__wixSDK__",
        h = function (n) {
          return (0, o.mG)(void 0, void 0, void 0, function () {
            var e, t, r, a;
            return (0, o.Jh)(this, function (o) {
              switch (o.label) {
                case 0:
                  return (a = g), [4, n];
                case 1:
                  return (
                    (e = a.apply(void 0, [o.sent()])),
                    (t = e[0]),
                    (r = e[1]),
                    [2, (0, d.sj)({ proxies: t, clonables: r })]
                  );
              }
            });
          });
        },
        p = function (n) {
          return (0, o.mG)(void 0, void 0, void 0, function () {
            var e, t;
            return (0, o.Jh)(this, function (r) {
              switch (r.label) {
                case 0:
                  return (
                    (e = m),
                    (t = [null == n ? void 0 : n.proxies]),
                    [4, null == n ? void 0 : n.clonables]
                  );
                case 1:
                  return [2, e.apply(void 0, t.concat([r.sent()]))];
              }
            });
          });
        },
        g = function (n) {
          var e = function (n, t) {
              var r, o;
              if (w(t)) {
                var a = L();
                return (n.promises[a] = t), ((r = {})[v] = a), r;
              }
              if (M(t)) {
                a = L();
                return (
                  (n.callbacks[a] = function (n, e) {
                    var r = m(n, e),
                      o = t.apply(void 0, r);
                    return h(o);
                  }),
                  ((o = {})[f] = a),
                  o
                );
              }
              return Array.isArray(t)
                ? t.map(function (t) {
                    return e(n, t);
                  })
                : y(t)
                ? k(t, function (t) {
                    return e(n, t);
                  })
                : t;
            },
            t = { promises: {}, callbacks: {} };
          return [t, e(t, n)];
        },
        m = function (n, e) {
          if (Array.isArray(e))
            return e.map(function (e) {
              return m(n, e);
            });
          if (y(e) && e.hasOwnProperty(v)) {
            var t = e[v];
            return n.promises[t];
          }
          if (y(e) && e.hasOwnProperty(f)) {
            var r = e[f];
            return function () {
              for (var e = [], t = 0; t < arguments.length; t++)
                e[t] = arguments[t];
              return (0, o.mG)(void 0, void 0, void 0, function () {
                var t, a, i, s;
                return (0, o.Jh)(this, function (o) {
                  switch (o.label) {
                    case 0:
                      return (
                        (t = g(e)),
                        (a = t[0]),
                        (i = t[1]),
                        [4, n.callbacks[r]((0, d.sj)(a), i)]
                      );
                    case 1:
                      return (s = o.sent()), [2, p(s)];
                  }
                });
              });
            };
          }
          return y(e)
            ? k(e, function (e) {
                return m(n, e);
              })
            : e;
        },
        b = function (n, e) {
          return new Proxy(n, {
            get: function (n, t) {
              return e(n[t]);
            },
          });
        },
        w = function (n) {
          return n instanceof Promise;
        },
        y = function (n) {
          return n && "object" == typeof n && !w(n);
        },
        M = function (n) {
          return "function" == typeof n;
        },
        k = function (n, e) {
          return Object.fromEntries(
            Object.entries(n).map(function (n) {
              var t = n[0],
                r = n[1];
              return [t, e(r)];
            })
          );
        },
        L =
          ((c = 0),
          function () {
            return ++c;
          }),
        S = function () {
          if (!l) throw new Error("SDK was not initialized");
          return l;
        },
        x = function () {
          return (0, o.mG)(void 0, void 0, void 0, function () {
            var n;
            return (0, o.Jh)(this, function (e) {
              switch (e.label) {
                case 0:
                  return l ? ((n = l), (l = void 0), [4, n[d.Yy]()]) : [3, 2];
                case 1:
                  e.sent(), (e.label = 2);
                case 2:
                  return [2];
              }
            });
          });
        },
        _ = function (n) {
          var e = n.postMessage,
            t = n.origin;
          x();
          var r,
            a = (function (n) {
              var e = n.postMessage,
                t = n.origin;
              if (!t)
                throw new Error(
                  "Origin must be provided in the URL search params."
                );
              if (!u.has(t))
                throw new Error(
                  "Invalid origin. Can't handshake with provided origin"
                );
              var r = new MessageChannel(),
                o = r.port1,
                a = r.port2;
              return (
                e(
                  {
                    code: "wix-sdk-bo-hello-handshake",
                    version: "1.0.0",
                    port: a,
                  },
                  t,
                  [a]
                ),
                o
              );
            })({ postMessage: e, origin: t });
          return (
            (r = (0, d.Ud)(a)),
            (l = b(r, function (n) {
              return function () {
                for (var e = [], t = 0; t < arguments.length; t++)
                  e[t] = arguments[t];
                return (0, o.mG)(void 0, void 0, void 0, function () {
                  var t, r, a, i;
                  return (0, o.Jh)(this, function (o) {
                    switch (o.label) {
                      case 0:
                        return (
                          (t = g(e)),
                          (r = t[0]),
                          (a = t[1]),
                          [4, n((0, d.sj)(r), a)]
                        );
                      case 1:
                        return (i = o.sent()), [2, p(i)];
                    }
                  });
                });
              };
            })),
            x
          );
        },
        j = function (n) {
          void 0 === n && (n = document.documentElement);
          var e = new ResizeObserver(function () {
            return (e = n), void S().updateHeight(e.offsetHeight);
            var e;
          });
          return (
            e.observe(n),
            function () {
              return e.disconnect();
            }
          );
        },
        E = function () {
          for (var n = [], e = 0; e < arguments.length; e++)
            n[e] = arguments[e];
          return (0, o.mG)(void 0, void 0, void 0, function () {
            var e;
            return (0, o.Jh)(this, function (t) {
              return [2, (e = S()).showToast.apply(e, n)];
            });
          });
        },
        P = function () {
          for (var n = [], e = 0; e < arguments.length; e++)
            n[e] = arguments[e];
          return (0, o.mG)(void 0, void 0, void 0, function () {
            var e;
            return (0, o.Jh)(this, function (t) {
              return [2, (e = S()).observeState.apply(e, n)];
            });
          });
        },
        O = function () {
          for (var n, e = [], t = 0; t < arguments.length; t++)
            e[t] = arguments[t];
          return (n = S()).navigate.apply(n, e);
        },
        A = function () {
          for (var n = [], e = 0; e < arguments.length; e++)
            n[e] = arguments[e];
          return (0, o.mG)(void 0, void 0, void 0, function () {
            var e;
            return (0, o.Jh)(this, function (t) {
              return [2, (e = S()).openModal.apply(e, n)];
            });
          });
        },
        C = function (n) {
          if (void 0 === n) return S().closeModal();
          var e = JSON.parse(JSON.stringify(n));
          return S().closeModal(e);
        };
      const J = new Proxy(
        {},
        {
          get() {
            return () => {
              console.warn(
                "wix-dashboard can only be used when running inside your site's dashboard"
              );
            };
          },
        }
      );
      function I({ handlers: n, platformEnvData: e, onPageWillUnmount: t }) {
        const u = s(n[a].getDashboardApi),
          c =
            "true" === new URL(e.location.rawUrl).searchParams.get("inBizMgr");
        let l = {};
        try {
          if (
            (function ({ locationHref: n }) {
              return (
                "true" === new URL(n).searchParams.get("dashboardSdkAvailable")
              );
            })({ locationHref: e.location.rawUrl })
          ) {
            const s = n[a].postMessageParent,
              { init: u } = r;
            l = (0, o._T)(r, ["init"]);
            const c = u({
              origin:
                ((d = e.location.rawUrl),
                new URL(d).searchParams.get("origin") || ""),
              postMessage: (n, e, t) => s(n, e, (0, i.re)(t, t)),
            });
            t(() => {
              c && c();
            });
          }
        } catch (e) {
          throw (n[a].captureError(e), e);
        }
        var d;
        const f = Object.assign(
          Object.assign(
            {},
            ((n) => {
              const e = {
                invoke(e, ...t) {
                  return n("invoke", e, ...t);
                },
                notifyListeners(e, ...t) {
                  return n("notifyListeners", e, ...t);
                },
                addListener(e, t) {
                  return n("addListener", e, t);
                },
                getModuleParams() {
                  return n("getModuleParams");
                },
                openLightbox() {
                  return n("openLightbox");
                },
                closeLightbox() {
                  return n("closeLightbox");
                },
                showToast(n) {
                  return e.invoke("businessManager.showToast", n);
                },
                showBadge(n) {
                  return e.invoke("businessManager.showSidebarBadge", n);
                },
                navigateTo(n) {
                  return e.invoke("businessManager.navigateTo", n);
                },
                getCurrentInstance(n) {
                  return e.invoke("businessManager.getCurrentInstance", n);
                },
                getMandatoryBIFields() {
                  return e.invoke("businessManager.getMandatoryBIFields");
                },
                notifyViewStartLoading(n) {
                  return e.notifyListeners(
                    "businessManager.viewStartLoading",
                    n
                  );
                },
                notifyViewFinishedLoading(n) {
                  return e.notifyListeners(
                    "businessManager.viewFinishedLoading",
                    n
                  );
                },
                notifyViewFirstInteractive(n) {
                  return e.notifyListeners(
                    "businessManager.viewFirstInteractive",
                    n
                  );
                },
              };
              return e;
            })(u)
          ),
          l
        );
        return { dashboard: c ? f : J };
      }
    },
    8635: function (n, e, t) {
      t.d(e, {
        Ud: function () {
          return d;
        },
        Yy: function () {
          return a;
        },
        sj: function () {
          return g;
        },
      });
      const r = Symbol("Comlink.proxy"),
        o = Symbol("Comlink.endpoint"),
        a = Symbol("Comlink.releaseProxy"),
        i = Symbol("Comlink.thrown"),
        s = (n) =>
          ("object" == typeof n && null !== n) || "function" == typeof n,
        u = new Map([
          [
            "proxy",
            {
              canHandle: (n) => s(n) && n[r],
              serialize(n) {
                const { port1: e, port2: t } = new MessageChannel();
                return c(n, e), [t, [t]];
              },
              deserialize(n) {
                return n.start(), d(n);
              },
            },
          ],
          [
            "throw",
            {
              canHandle: (n) => s(n) && i in n,
              serialize({ value: n }) {
                let e;
                return (
                  (e =
                    n instanceof Error
                      ? {
                          isError: !0,
                          value: {
                            message: n.message,
                            name: n.name,
                            stack: n.stack,
                          },
                        }
                      : { isError: !1, value: n }),
                  [e, []]
                );
              },
              deserialize(n) {
                if (n.isError)
                  throw Object.assign(new Error(n.value.message), n.value);
                throw n.value;
              },
            },
          ],
        ]);
      function c(n, e = self) {
        e.addEventListener("message", function t(r) {
          if (!r || !r.data) return;
          const {
              id: o,
              type: a,
              path: s,
            } = Object.assign({ path: [] }, r.data),
            u = (r.data.argumentList || []).map(b);
          let d;
          try {
            const e = s.slice(0, -1).reduce((n, e) => n[e], n),
              t = s.reduce((n, e) => n[e], n);
            switch (a) {
              case 0:
                d = t;
                break;
              case 1:
                (e[s.slice(-1)[0]] = b(r.data.value)), (d = !0);
                break;
              case 2:
                d = t.apply(e, u);
                break;
              case 3:
                d = g(new t(...u));
                break;
              case 4:
                {
                  const { port1: e, port2: t } = new MessageChannel();
                  c(n, t),
                    (d = (function (n, e) {
                      return p.set(n, e), n;
                    })(e, [e]));
                }
                break;
              case 5:
                d = void 0;
            }
          } catch (n) {
            d = { value: n, [i]: 0 };
          }
          Promise.resolve(d)
            .catch((n) => ({ value: n, [i]: 0 }))
            .then((n) => {
              const [r, i] = m(n);
              e.postMessage(Object.assign(Object.assign({}, r), { id: o }), i),
                5 === a && (e.removeEventListener("message", t), l(e));
            });
        }),
          e.start && e.start();
      }
      function l(n) {
        (function (n) {
          return "MessagePort" === n.constructor.name;
        })(n) && n.close();
      }
      function d(n, e) {
        return v(n, [], e);
      }
      function f(n) {
        if (n) throw new Error("Proxy has been released and is not useable");
      }
      function v(n, e = [], t = function () {}) {
        let r = !1;
        const i = new Proxy(t, {
          get(t, o) {
            if ((f(r), o === a))
              return () =>
                w(n, { type: 5, path: e.map((n) => n.toString()) }).then(() => {
                  l(n), (r = !0);
                });
            if ("then" === o) {
              if (0 === e.length) return { then: () => i };
              const t = w(n, {
                type: 0,
                path: e.map((n) => n.toString()),
              }).then(b);
              return t.then.bind(t);
            }
            return v(n, [...e, o]);
          },
          set(t, o, a) {
            f(r);
            const [i, s] = m(a);
            return w(
              n,
              { type: 1, path: [...e, o].map((n) => n.toString()), value: i },
              s
            ).then(b);
          },
          apply(t, a, i) {
            f(r);
            const s = e[e.length - 1];
            if (s === o) return w(n, { type: 4 }).then(b);
            if ("bind" === s) return v(n, e.slice(0, -1));
            const [u, c] = h(i);
            return w(
              n,
              { type: 2, path: e.map((n) => n.toString()), argumentList: u },
              c
            ).then(b);
          },
          construct(t, o) {
            f(r);
            const [a, i] = h(o);
            return w(
              n,
              { type: 3, path: e.map((n) => n.toString()), argumentList: a },
              i
            ).then(b);
          },
        });
        return i;
      }
      function h(n) {
        const e = n.map(m);
        return [
          e.map((n) => n[0]),
          ((t = e.map((n) => n[1])), Array.prototype.concat.apply([], t)),
        ];
        var t;
      }
      const p = new WeakMap();
      function g(n) {
        return Object.assign(n, { [r]: !0 });
      }
      function m(n) {
        for (const [e, t] of u)
          if (t.canHandle(n)) {
            const [r, o] = t.serialize(n);
            return [{ type: 3, name: e, value: r }, o];
          }
        return [{ type: 0, value: n }, p.get(n) || []];
      }
      function b(n) {
        switch (n.type) {
          case 3:
            return u.get(n.name).deserialize(n.value);
          case 0:
            return n.value;
        }
      }
      function w(n, e, t) {
        return new Promise((r) => {
          const o = new Array(4)
            .fill(0)
            .map(() =>
              Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16)
            )
            .join("-");
          n.addEventListener("message", function e(t) {
            t.data &&
              t.data.id &&
              t.data.id === o &&
              (n.removeEventListener("message", e), r(t.data));
          }),
            n.start && n.start(),
            n.postMessage(Object.assign({ id: o }, e), t);
        });
      }
    },
  },
]);
//# sourceMappingURL=feature-dashboard-wix-code-sdk.30de68ed.chunk.min.js.map
